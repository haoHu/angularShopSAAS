<section class="section section-diandan" ng-controller="SnackViewController" hotkey="true">
	<div class="order-plain">
		<div class="order-box">
			
			<div class="order-body grid-box">
				<!-- 单头信息 -->
				<header class="order-header" >
					<orderheader fmels="orderHeader" channels="OrderChannels" class="clearfix" ></orderheader>
				</header>
				<!-- 订单条目头 -->
				<div class="row grid-header">
					<span class="col-xs-1 grid-cell txt"></span>
					<span class="col-xs-4 grid-cell txt">品名</span>
					<span class="col-xs-2 grid-cell num">数量</span>
					<span class="col-xs-2 grid-cell unit">规格</span>
					<span class="col-xs-3 grid-cell price">小计</span>
				</div>
				<!-- <div>{{curOrderItems.length}}</div> -->
				<div class="order-list">
					<orderlist></orderlist>
				</div>
				
				
			</div>
			
			<footer class="order-footer">
				<!-- 订单操作按钮组 -->
				<div class="btn-grp clearfix" order-pager="{{curOrderItems.length}}">
					<div class="col-xs-4"><button class="btn btn-default btn-block btn-print" type="button" ng-click="printOrderDetailBill()">打印明细</button></div>
					<div class="col-xs-4"><button class="btn btn-default btn-block btn-prev" type="button" pager-act="prev">上页</button></div>
					<div class="col-xs-4"><button class="btn btn-default btn-block btn-next" type="button" pager-act="next">下页</button></div>
				</div>
				<!-- 订单单注 -->
				<div class="order-remark clearfix">
					<div class="col-xs-7">
						<label for="">账单合计</label>
						<span class="dollar">￥</span>
						<!-- <span class="cash">58888</span> -->
						<span class="cash">{{calcOrderAmount() | prettyNum}}</span>
					</div>
					<div class="col-xs-5">
						<button class="btn btn-default btn-block" type="button" ng-click="openOrderRemark()">{{curOrderRemark}}</button>
					</div>
				</div>
			</footer>
		</div>
		<div class="order-btngrp">
			<orderitemhandle></orderitemhandle>
		</div>
	</div>
	<div class="menu-plain">
		<foodcategory></foodcategory>
		<foodmenu></foodmenu>
		<!-- <div class="tab cates"  pager-list="loop" pager-data="{{FoodCategories.length}}" page-size="10" item-selector=".cell-btn[food-category]" btn-selector=".btn-pager" page-num="0">
			<div class="col-xs-2 btn cell-btn" ng-repeat="cate in FoodCategories" ng-class="{active : curFoodCategory == cate.foodCategoryKey}" food-category="{{cate.foodCategoryKey}}" ng-click="changeFoodCategory(cate.foodCategoryKey)">
				<p>{{cate.foodCategoryName}}</p>
			</div>
			<div class="col-xs-2 cell-btn btn btn-search" food-search="{{curFoodCategory}}" ng-click="openSearch()"><span>搜索</span></div>
			<div class="col-xs-2 cell-btn btn btn-pager" pager-direction="+1"><span>翻页</span></div>
		</div> -->

		<!-- <div class="foods" pager-list="common" pager-data="{{curFoods.length}}" page-size="34" item-selector=".cell-btn[unit-key]" btn-selector=".btn-prev,.btn-next" page-num="0">
			<div class="col-xs-2 btn cell-btn" unit-key="{{food.__foodUnit.unitKey}}" ng-repeat="food in curFoods" >
				<p food-key="{{food.foodKey}}" unit-key="{{food.__foodUnit.unitKey}}">{{food.foodName}}</p>
				<p class="unit">
					{{food.__foodUnit.price | currency : "￥" }}/{{food.__foodUnit.unit}}
				</p>
			</div>
			<div class="col-xs-2 btn cell-btn btn-prev" pager-direction="-1"><span>上页</span></div>
			<div class="col-xs-2 btn cell-btn btn-next" pager-direction="+1"><span>下页</span></div>
		</div>
		 -->
		
	</div>
	<orderhandlebtns></orderhandlebtns>
	<!-- <div class="btns-plain">

		<div class="col-xs-10">
			<div class="col-xs-2"><button class="btn btn-warning btn-block" type="button" btn-act="luodan">落单</button></div>
			<div class="col-xs-2"><button class="btn btn-warning btn-block" type="button" btn-act="guadan">挂单</button></div>
			<div class="col-xs-2"><button class="btn btn-warning btn-block" type="button" btn-act="tidan">提单</button></div>
			<div class="col-xs-2"><button class="btn btn-warning btn-block" type="button" btn-act="luodan">现金</button></div>
			<div class="col-xs-2"><button class="btn btn-warning btn-block" type="button" btn-act="luodan">其他结账</button></div>
			<div class="col-xs-2"><button class="btn btn-warning btn-block" type="button" btn-act="luodan">开钱箱</button></div>
		</div>
		<div class="col-xs-2">
			<button class="btn btn-default btn-block" type="button" btn-act="return">返回</button>
		</div>
	</div> -->

	<div class="modal fade" id="search_food">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<div class="form-horizontal">
						<div class="form-group">
							<label for="" class="col-xs-3 control-label">菜品助记码</label>
							<div class="col-xs-9">
								<input type="text" class="form-control input-lg" ng-model="curSearchKey" ng-change="searchFood()" autofocus="true"  >
							</div>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<div class="btn-group btn-group-justified" role="group">
						<div class="btn-group" role="group">
							<button type="button" class="btn btn-default btn-lg">关闭</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<alert class="site-toptip" ng-repeat="alert in toptips" type="{{alert.type}}" close="closeTopTip($index)" dismiss-on-timeout="1500">{{alert.msg}}</alert>
	<!-- 赠送菜品操作模板 -->
	<script type="text/ng-template" id="js/diandan/orderItemSend.html">
		<div class="modal-header">
			<h4 class="modal-title">赠菜({{curFoodName}})</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-xs-6">
					<form class="form-horizontal clearfix" name="send_food" role="form" novalidate="novalidate">
						<div class="form-group has-feedback">
							<label for="" class="col-xs-3 control-label">数量</label>
							<div class="col-xs-7" ng-class="{'has-success' : send_food.foodSendNumber.$dirty && send_food.foodSendNumber.$valid, 'has-error' : send_food.foodSendNumber.$invalid}">
								<input type="text" class="form-control" name="foodSendNumber" ng-model="foodSendNumber" ng-focus="inputFocus($event)" autofocus="true"  bv-notempty bv-isnum bv-floatprecision="2" bv-between="true" min="0" max="{{enableSendNumber}}" tabindex="1" />
								<span class="help-block">可以赠送数量：{{enableSendNumber}}</span>
								<small class="help-block" ng-show="send_food.foodSendNumber.$dirty && send_food.foodSendNumber.$error.bvNotempty">请输入赠送数量</small>
								<small class="help-block" ng-show="send_food.foodSendNumber.$dirty && send_food.foodSendNumber.$error.bvIsnum">必须是数字</small>
								<small class="help-block" ng-show="send_food.foodSendNumber.$dirty && send_food.foodSendNumber.$error.bvFloatprecision">精确到小数点后2位</small>
								<small class="help-block" ng-show="send_food.foodSendNumber.$dirty && send_food.foodSendNumber.$error.bvBetween">赠送数量必须在0到{{enableSendNumber}}之间</small>
							</div>
						</div>
					</form>
					<numkeyboard cur-target="focusInputEl"></numkeyboard>
				</div>
				<div class="col-xs-6">
					<div class="" >
						<h4>赠菜原因</h4>
						<div class="btngrp-box btngrp-3x3" pager-list="loop" pager-data="{{SendFoodReasons}}" page-size="8" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
							<radiogroup group-opts="SendFoodReasons" radio-name="sendReason" cur-val="{{sendReason}}" class="btn-group" role="group" data-toggle="buttons" on-change="onSendReasonChange(val)"></radiogroup>
							<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
						</div>
						
					</div>
				</div>
			</div>
			
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()">保存</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 退菜操作模板 -->
	<script type="text/ng-template" id="js/diandan/orderItemCancel.html">
		<div class="modal-header">
			<h4 class="modal-title">退菜({{curFoodName}})</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-xs-6">
					<form class="form-horizontal clearfix" name="cancel_food" role="form" novalidate="novalidate">
						<div class="form-group has-feedback">
							<label for="" class="col-xs-3 control-label">数量</label>
							<div class="col-xs-7" ng-class="{'has-success' : cancel_food.foodCancelNumber.$dirty && cancel_food.foodCancelNumber.$valid, 'has-error' : cancel_food.foodCancelNumber.$invalid}">
								<input type="text" class="form-control" name="foodCancelNumber" ng-model="foodCancelNumber" ng-focus="inputFocus($event)" autofocus="true"   bv-notempty bv-isnum bv-floatprecision="2" bv-between="true" min="0" max="{{enableCancelNumber}}" tabindex="1" />
								<span class="help-block">可以退菜数量：{{enableCancelNumber}}</span>
								<small class="help-block" ng-show="cancel_food.foodCancelNumber.$dirty && cancel_food.foodCancelNumber.$error.bvNotempty">请输入退菜数量</small>
								<small class="help-block" ng-show="cancel_food.foodCancelNumber.$dirty && cancel_food.foodCancelNumber.$error.bvIsnum">必须是数字</small>
								<small class="help-block" ng-show="cancel_food.foodCancelNumber.$dirty && cancel_food.foodCancelNumber.$error.bvFloatprecision">精确到小数点后2位</small>
								<small class="help-block" ng-show="cancel_food.foodCancelNumber.$dirty && cancel_food.foodCancelNumber.$error.bvBetween">退菜数量必须在0到{{enableCancelNumber}}之间</small>
							</div>
						</div>
						
					</form>
					<numkeyboard cur-target="focusInputEl"></numkeyboard>
				</div>
				<div class="col-xs-6">
					<div class="" >
						<h4>退菜原因</h4>
						<div class="btngrp-box btngrp-3x3" pager-list="loop" pager-data="{{CancelFoodReasons}}" page-size="8" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
							<radiogroup group-opts="CancelFoodReasons" radio-name="cancelReason" cur-val="{{cancelReason}}" class="btn-group" role="group" data-toggle="buttons" on-change="onCancelReasonChange(val)"></radiogroup>
							<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
						</div>
						
					</div>
				</div>
			</div>
			
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()">保存</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 改量操作模板 -->
	<script type="text/ng-template" id="js/diandan/orderItemModifyCount.html">
		<div class="modal-header">
			<h4 class="modal-title">改量({{curFoodName}})</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-xs-offset-1 col-xs-10">
					<form class="form-horizontal clearfix" name="modify_count" role="form" novalidate="novalidate">
						<div class="form-group has-feedback">
							<label for="" class="col-xs-3 control-label">数量</label>
							<div class="col-xs-9" ng-class="{'has-success' : modify_count.foodCount.$dirty && modify_count.foodCount.$valid, 'has-error' : modify_count.foodCount.$invalid}">
								<input type="text" class="form-control" name="foodCount" ng-model="foodCount" ng-focus="inputFocus($event)" autofocus="true"   bv-notempty bv-isnum bv-floatprecision="2" tabindex="1" />
								<span class="help-block">当前菜品数量：{{curFoodCount}}</span>
								<small class="help-block" ng-show="modify_count.foodCount.$dirty && modify_count.foodCount.$error.bvNotempty">请输入菜品数量</small>
								<small class="help-block" ng-show="modify_count.foodCount.$dirty && modify_count.foodCount.$error.bvIsnum">必须是数字</small>
								<small class="help-block" ng-show="modify_count.foodCount.$dirty && modify_count.foodCount.$error.bvFloatprecision">精确到小数点后2位</small>
							</div>
						</div>
					</form>
					<numkeyboard cur-target="focusInputEl"></numkeyboard>
				</div>
			</div>
			
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()">保存</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 改价操作模板 -->
	<script type="text/ng-template" id="js/diandan/orderItemModifyPrice.html">
		<div class="modal-header">
			<h4 class="modal-title">改价({{curFoodName}})</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-xs-6">
					<form class="form-horizontal clearfix" name="modify_price" role="form" novalidate="novalidate">
						<div class="form-group has-feedback">
							<label for="" class="col-xs-3 control-label">价格</label>
							<div class="col-xs-7" ng-class="{'has-success' : modify_price.foodPrice.$dirty && modify_price.foodPrice.$valid, 'has-error' : modify_price.foodPrice.$invalid}">
								<input type="text" class="form-control" name="foodPrice" ng-model="foodPrice" ng-focus="inputFocus($event)" autofocus="true" bv-notempty bv-isnum bv-floatprecision="2"/>
								<span class="help-block">菜品当前价格：{{curFoodPrice}}</span>
								<small class="help-block" ng-show="modify_price.foodPrice.$dirty && modify_price.foodPrice.$error.bvNotempty">请输入菜品价格</small>
								<small class="help-block" ng-show="modify_price.foodPrice.$dirty && modify_price.foodPrice.$error.bvIsnum">必须是数字</small>
								<small class="help-block" ng-show="modify_price.foodPrice.$dirty && modify_price.foodPrice.$error.bvFloatprecision">精确到小数点后2位</small>
							</div>
						</div>
					</form>
					<numkeyboard cur-target="focusInputEl"></numkeyboard>
				</div>
				<div class="col-xs-6">
					<div class="" >
						<h4>改价原因</h4>
						<div class="btngrp-box btngrp-4x3" pager-list="loop" pager-data="{{ModifyPriceNotes}}" page-size="11" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
							<radiogroup group-opts="ModifyPriceNotes" radio-name="priceReason" cur-val="" class="btn-group" role="group" data-toggle="buttons" on-change="onFoodPriceNoteChange(val)"></radiogroup>
							<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
						</div>
						
					</div>
				</div>
			</div>
			
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()">保存</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 作法操作模板 -->
	<script type="text/ng-template" id="js/diandan/orderItemModifyMethod.html">
		<div class="modal-header">
			<h4 class="modal-title">作法设置({{curFoodName}})</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-xs-12">
					<div class="" >
						<h4>作法选择</h4>
						<div class="btngrp-box btngrp-5x5" pager-list="loop" pager-data="{{FoodMethods}}" page-size="24" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
							<radiogroup group-opts="FoodMethods" radio-name="foodMethod" cur-val="{{foodMethod}}" class="btn-group" role="group" data-toggle="buttons" on-change="onFoodRemarkChange(val)"></radiogroup>
							<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
						</div>
						
					</div>
				</div>
			</div>
			
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()">保存</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 口味操作模板 -->
	<script type="text/ng-template" id="js/diandan/orderItemModifyRemark.html">
		<div class="modal-header">
			<h4 class="modal-title">口味设置({{curFoodName}})</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-xs-12">
					<div class="" >
						<h4>口味选择</h4>
						<div class="btngrp-box btngrp-5x5" pager-list="loop" pager-data="{{FoodRemarks}}" page-size="24" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
							<radiogroup group-opts="FoodRemarks" radio-name="foodRemark" cur-val="{{foodRemark}}" class="btn-group" role="group" data-toggle="buttons" on-change="onFoodRemarkChange(val)"></radiogroup>
							<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
						</div>
						
					</div>
				</div>
			</div>
			
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()">保存</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 单注 -->
	<script type="text/ng-template" id="js/diandan/orderRemark.html">
		<div class="modal-header">
			<h4 class="modal-title">单注设置</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-xs-12">
					<div class="" >
						<h4>单注选择</h4>
						<div class="btngrp-box btngrp-5x5" pager-list="loop" pager-data="{{OrderRemarks}}" page-size="24" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
							<radiogroup group-opts="OrderRemarks" radio-name="orderRemark" cur-val="{{orderRemark}}" class="btn-group" role="group" data-toggle="buttons" on-change="onOrderRemarkChange(val)"></radiogroup>
							<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
						</div>
						
					</div>
				</div>
			</div>
			
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()">保存</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 套餐配置窗口 -->
	<script type="text/ng-template" id="js/diandan/setFoodCfg.html">
		<div class="modal-header">
			<h4 class="modal-title">套餐搭配</h4>
		</div>
		<div class="modal-body">
			<div class="row">
				<div class="col-xs-6" ng-repeat="el in curSetFoodLst">
					<div class="" >
						<h4>{{el.foodCategoryName}}({{el.items.length}}选<span class="text-danger">{{el.chooseCount}}</span>)</h4>
						<div class="btngrp-box btngrp-2x3" pager-list="loop" pager-data="{{el.items}}" page-size="5" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
							<checkboxgroup group-opts="el.items" checkbox-name="cate_{{$index}}" cur-val="el.selectedFoods" class="btn-group" role="group" data-toggle="buttons" on-change="onSetFoodChange(val, checkboxName)" ></checkboxgroup>
							<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
						</div>
					</div>
				</div>
			</div>
			
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()">保存</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 新版套餐配置窗口 -->
	<script type="text/ng-template" id="js/diandan/setFoodSetting.html">
		<div class="modal-body">
			<div class="setfood-ctrl" >
				<section class="ctrl-schema col-xs-8" setfood-pager=".cate-item">
					<header class="schema-header">
						<h4>套餐搭配</h4>
						<button class="btn btn-default btn-close btn-lg pull-right" ng-click="close()">返回</button>
					</header>
					<section class="schema-body">
						<div id="food_list" class="opt-box">
							<div class="cate-items">
								<div class="cate-item" ng-repeat="el in curSetFoodLst">
									<h5>
										{{el.foodCategoryName}}({{el.items.length}}选<span class="text-danger">{{el.chooseCount}}</span>)
										<small class="text-danger" ng-if="el.canSwitch == 0">固定搭配,不可选择</small>
									</h5>
									<ul class="row list-unstyled btn-list">
										<!--<li class="col-xs-3 btn btn-default btn-cell" ng-class="{active : curFoodBtnID == food._id}" ng-click="captureCurFoodItem(el.foodCategoryName, food.unitKey, $index)" ng-repeat="food in getChosenFoods(el.foodCategoryName)" id="{{food._id}}">
											<div ng-bind-html="parseSnippet(food.label)"></div>
										</li>-->
										<li class="col-xs-3 btn btn-default btn-cell" ng-class="{active : curFoodBtnID == food._id}" ng-click="captureCurFoodItem(el.foodCategoryName, food.unitKey, $index)" ng-repeat="food in mapSelectedFoods(el.selectedFoods)" id="{{food._id}}">
											<div ng-bind-html="parseSnippet(food.label)"></div>
											<div ng-if="!_.isEmpty(food.remark)">
												{{food.remark.notesName}}
											</div>
										</li>
									</ul>
								</div>
							</div>


						</div>
					</section>
					<footer class="schema-footer">
						<div class="btn-group center-block clearfix">
							<button type="button" class="btn btn-default col-xs-6 btn-prev"  pager-act="prev">上页</button>
							<button type="button" class="btn btn-default col-xs-6 btn-next"  pager-act="next">下页</button>
						</div>
						<button type="button" class="btn btn-default btn-block" ng-click="save()">完成套餐搭配</button>
					</footer>
				</section>
				<section class="ctrl-opt" setfood-pager=".btn-cell">
					<header class="opt-header">
						<div class="btn-group center-block clearfix">
							<label class="btn btn-default col-xs-6" ng-model="curMenuType" btn-radio="'food'">菜品</label>
							<label class="btn btn-default col-xs-6" ng-model="curMenuType" btn-radio="'remark'">口味</label>
						</div>
					</header>
					<section class="opt-body">
						<div class="opt-box">
							<ul class="row list-unstyled btn-list" ng-if="curMenuType == 'food'">
								<li class="col-xs-6 btn btn-default btn-cell" ng-repeat="food in getFoodOpts(curFoodCategory)" ng-click="replaceFoodItem(food.unitKey)" ng-disabled="food.canSwitch == 0">
									<div ng-bind-html="parseSnippet(food.label)"></div>
								</li>
							</ul>
							<ul class="row list-unstyled btn-list" ng-if="curMenuType == 'remark'">
								<li class="col-xs-6 btn btn-default btn-cell" ng-repeat="remark in getFoodRemarks()" ng-click="setFoodRemark(remark)">
									<div ng-bind-html="parseSnippet(remark.label)"></div>
								</li>
							</ul>
						</div>
					</section>
					<footer class="schema-footer">
						<div class="btn-group center-block clearfix">
							<button type="button" class="btn btn-default col-xs-6 btn-prev"  pager-act="prev">上页</button>
							<button type="button" class="btn btn-default col-xs-6 btn-next"  pager-act="next">下页</button>
						</div>
					</footer>
				</section>
			</div>
		</div>
	</script>

	<!-- 临时菜配置窗口 -->
	<script type="text/ng-template" id="js/diandan/tempFoodSetting.html">
		<div class="modal-header">
			<h4 class="modal-title">配置临时菜</h4>
		</div>
		<div class="modal-body">
			<form class="form-horizontal" name="temp_food" role="form"  novalidate="novalidate">
				<div class="form-group clearfix">
					<label for="" class="col-xs-3 control-label">菜品名称</label>
					<div class="col-xs-9" ng-class="{'has-success' : temp_food.foodName.$dirty && temp_food.foodName.$valid, 'has-error' : temp_food.foodName.$invalid}">
						<input type="text" class="form-control" name="foodName" ng-model="foodName" autofocus="true" bv-notempty bv-strlength min="2" max="30" />
						<small class="help-block" ng-show="temp_food.foodName.$dirty && temp_food.foodName.$error.bvNotempty">请输入菜品名称</small>
						<small class="help-block" ng-show="temp_food.foodName.$dirty && temp_food.foodName.$error.bvStrlength">菜品名称必须是2-30位字符之间</small>

					</div>
				</div>
				<div class="form-group clearfix">
					<label for="" class="col-xs-3 control-label">菜品价格</label>
					<div class="col-xs-9" ng-class="{'has-success' : temp_food.foodPrice.$dirty && temp_food.foodPrice.$valid, 'has-error' : temp_food.foodPrice.$invalid}">
						<input type="text" class="form-control" name="foodPrice" ng-model="foodPrice" ng-focus="inputFocus($event)" autofocus="true" bv-notempty bv-isnum bv-greaterthan="true" min="0"/>
						<small class="help-block" ng-show="temp_food.foodPrice.$dirty && temp_food.foodPrice.$error.bvNotempty">请输入菜品价格</small>
						<small class="help-block" ng-show="temp_food.foodPrice.$dirty && temp_food.foodPrice.$error.bvStrlength">菜品价格必须大于或等于0</small>
					</div>
				</div>
				<div class="form-group clearfix">
					<label for="" class="col-xs-3 control-label">菜品规格</label>
					<div class="col-xs-9" ng-class="{'has-success' : temp_food.unit.$dirty && temp_food.unit.$valid, 'has-error' : temp_food.unit.$invalid}">
						<input type="text" class="form-control" name="unit" ng-model="unit" bv-notempty bv-strlength min="1" max="10"/>
						<small class="help-block" ng-show="temp_food.unit.$dirty && temp_food.unit.$error.bvNotempty">请输入菜品规格</small>
						<small class="help-block" ng-show="temp_food.unit.$dirty && temp_food.unit.$error.bvStrlength">菜品规格名称必须在1-10位字符之间</small>

					</div>
				</div>
				<numkeyboard cur-target="focusInputEl"></numkeyboard>
			</form>
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="save()" ng-disabled="temp_food.$invalid " >确定</button>
				</div>
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()">取消</button>
				</div>
			</div>
		</div>
	</script>
	
	
	<!-- 提单操作窗口 -->
	<script type="text/ng-template" id="js/diandan/pickOrder.html">
		<div class="modal-header">
			<h4 class="modal-title">提单操作</h4>
		</div>
		<div class="modal-body">
			<ul class="order-catch row list-unstyled" ng-if="OrdersCatch.length > 0">
				<li class="col-xs-4 item" ng-repeat="el in OrdersCatch" id="el.__catchID" ng-click="onOrderCatchClick($event, el.__catchID)">
					<p>订单号:{{el.saasOrderKey}}</p>
					<p>时间:{{el.startTime | formatDateTimeStr:"yyyy-MM-dd HH:mm:ss"}}</p>
					<p ng-repeat="food in el.foodLst" ng-if="$index < 4">
						{{food.foodName}}
					</p>
					<p ng-if="el.foodLst.length > 4">
						...
					</p>
				</li>
			</ul>
			<p class="alert text-center center-block bg-danger text-danger" ng-if="!OrdersCatch || (OrdersCatch && OrdersCatch.length == 0)">当前没有挂起订单！</p>
		</div>
		<div class="modal-footer">
			<div class="btn-group btn-group-justified" role="group">
				<div class="btn-group" role="group">
					<button type="button" class="btn btn-default btn-lg" ng-click="close()" >取消</button>
				</div>
			</div>
		</div>
	</script>
	<!-- 订单支付操作窗口 
	<script type="text/ng-template" id="js/diandan/payOrder.html">
		<div class="modal-body">
			<div class="pay-ctrl">
				<section class="pay-schema">
					<header class="schema-header">
						<h4>结账</h4>
						<button class="btn btn-default btn-close btn-lg pull-right" ng-click="close()">返回</button>
						
					</header>
					<section class="schema-body">
						<div class="row disabeld">
							<label class="col-xs-5 control-label">菜品金额</label>
							<p class="col-xs-7 sum">{{orderPayDetail.foodAmount | currency:"￥"}}</p>
						</div>
						<ul class="list-group">
							<li ng-repeat="paySubjectGrp in orderPayDetail.payGrps" class="list-group-item clearfix" name="{{paySubjectGrp.name}}" ng-class="{disabled : isDisabledPaySubjectGrp(paySubjectGrp), active : isCurPaySubjectGrpName(paySubjectGrp.name), hidden : isHiddenPaySubjectGrp(paySubjectGrp)}" ng-click="changeCurrentPaySubjectGrp(paySubjectGrp)">
								<label class="col-xs-5">{{paySubjectGrp.label}}</label>
								<p class="col-xs-7 sum" ng-class="{hidden : isHiddenPrice(paySubjectGrp.amount)}">{{paySubjectGrp.amount | mycurrency:"￥"}}</p>
								<p class="col-xs-12" ng-if="isNotEmptyStr(paySubjectGrp.detail)">{{paySubjectGrp.detail}}</p>
								<button class="btn btn-default" ng-if="isNotZeroAmount(paySubjectGrp)" ng-click="resetPaySubject(paySubjectGrp)">撤销</button>
							</li>
						</ul>
					</section>
					<footer class="schema-footer">
						<div class="row">
							<label class="col-xs-5 control-label">未付</label>
							<p class="col-xs-7 sum">{{orderPayDetail.unPayAmount | mycurrency: "￥"}}</p>
						</div>
						<div class="btn-group btn-group-justified" role="group">
							<div class="btn-group" role="group">
								<button type="button" class="btn btn-default btn-block btn-lg" ng-click="openCashBox()">开钱箱</button>
							</div>
							<div class="btn-group" role="group">
								<button type="button" class="btn btn-default btn-block btn-lg" ng-click="printCheckoutPreBill()">打印预结单</button>
							</div>
						</div>
						
						<div class="row hidden">
							<div class="col-xs-6">
								<button type="button" class="btn btn-default btn-block btn-lg" ng-click="openCashBox()">开钱箱</button>
							</div>
							<div class="col-xs-6">
								<button type="button" class="btn btn-default btn-block btn-lg" ng-click="printCheckoutPreBill()">打印预结单</button>
							</div>
						</div>
						
						<button type="button" class="btn btn-default btn-block btn-lg" ng-class="{disabled : !isCanbeSubmit(orderPayDetail)}" ng-click="submitOrderPay()">完成结账</button>
					</footer>
				</section>
				
				<section class="pay-subject">
					<div class="panel panel-default animate-repeat" ng-repeat="paySubjectGrp in orderPayDetail.payGrps | filter:curPaySubjectGrpName" id="{{paySubjectGrp.name}}">
						<div class="panel-heading">
							{{paySubjectGrp.label}}
						</div>
						<div class="panel-body">
							<commonpayform ng-if="getPayFormType(paySubjectGrp) == 'common'" pay-subject-grp="paySubjectGrp" form-cfg="payFormCfg[paySubjectGrp.name]" ></commonpayform>
							<vippayform ng-if="getPayFormType(paySubjectGrp) == 'vip'" pay-subject-grp="paySubjectGrp"></vippayform>
						</div>
						<div class="panel-footer" ng-if="paySubjectGrp.name !== 'cashPay'">
							<button  class="btn btn-default btn-block btn-lg" ng-if="getPayFormType(paySubjectGrp) == 'common'" ng-click="submitPayForm(paySubjectGrp)" ng-disabled="!formIsValid">
								确认收款
							</button>
							<button  class="btn btn-default btn-block btn-lg" ng-if="getPayFormType(paySubjectGrp) == 'vip'" ng-click="submitPayForm(paySubjectGrp)" ng-disabled="!formIsValid">
								会员消费确认
							</button>
						</div>
						<div class="panel-footer" ng-if="paySubjectGrp.name == 'cashPay'">
							<div class="btn-group btn-group-justified" role="group">
								<div class="btn-group" role="group">
									<button type="button" class="btn btn-default btn-lg" ng-click="submitPayForm(paySubjectGrp)" ng-disabled="!formIsValid">确认收款</button>
								</div>
								<div class="btn-group" role="group">
									<button type="button" class="btn btn-default btn-lg" ng-click="quickSubmitCashPay(paySubjectGrp)" ng-disabled="!formIsValid">完成结账</button>
								</div>
							</div>
						</div>
					</div>
					
				</section>
			</div>
			
		</div>
	</script>-->
	<!-- 通用支付表单部件
	<script type="text/ng-template" id="js/diandan/commonpayform.html">
		<form class="row" role="form" name="com_pay" novalidate="novalidate">
			<div class="" ng-class="{'col-xs-12' : paySubjectGrp.name == 'discountPay', 'col-xs-4' : paySubjectGrp.name != 'discountPay'}" ng-if="needLeftBar(paySubjectGrp.name)">
				<div class="btngrp-box discount-grp" ng-if="paySubjectGrp.name == 'discountPay'" pager-list="loop" pager-data="{{discountRuleLst}}" page-size="11" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
					<radiogroup group-opts="discountRuleLst" radio-name="discountRule" cur-val="{{curDiscountRule}}" class="btn-group" role="group" data-toggle="buttons" on-change="onDiscountChange(val)"></radiogroup>
					<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
				</div>
				
				<div class="btngrp-box btngrp-vertical" ng-if="paySubjectGrp.name != 'discountPay'" pager-list="loop" pager-data="{{optCfg.items}}" page-size="5" item-selector=".btn.btn-radio" btn-selector=".btn-pager" page-num="0">
					<radiogroup group-opts="optCfg.items" radio-name="pay_subject" cur-val="optCfg.selectedSubjects" class="btn-group" role="group" data-toggle="buttons" on-change="onPaySubjectChange(val)"></radiogroup>
					<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
				</div>
			</div>
			<div class="col-xs-12 hll-paytype" ng-if="paySubjectGrp.name == 'hualalaPay'">
				<div class="btn-group btn-group-justified">
					<label class="btn btn-warning btn-lg " ng-model="payType" btn-radio="''" ng-click="genQRCode()">哗啦啦手工输入</label>
					<label class="btn btn-warning btn-lg " ng-model="payType" btn-radio="'HLL'" ng-click="genQRCode('HLL')" ng-disabled="onlyHLLPayManual">哗啦啦扫码支付</label>
					<label class="btn btn-warning btn-lg " ng-model="payType" btn-radio="'WECHAT'" ng-click="genQRCode('WECHAT')" ng-disabled="onlyHLLPayManual">微信扫码支付</label>
					<label class="btn btn-warning btn-lg " ng-model="payType" btn-radio="'ALIPAY'" ng-click="genQRCode('ALIPAY')" ng-disabled="onlyHLLPayManual">支付宝扫码支付</label>
					
				</div>
			</div>
			<div class="col-xs-8" ng-if="paySubjectGrp.name != 'discountPay'" ng-class="{hidden : !!payType}">
				<div class="form-horizontal">
					<div class="form-group" ng-repeat="el in formCfg">
						<label class="col-xs-4 control-label">{{el.label}}</label>
						<div class="col-xs-8" ng-class="{'has-success' : com_pay.realPrice.$dirty && com_pay.realPrice.$valid, 'has-error' : com_pay.realPrice.$invalid}">
							<input ng-if="$index == 0 && (paySubjectGrp.name == 'cashPay' || paySubjectGrp.name == 'remissionPay')" type="text" class="form-control" name="realPrice" ng-model="el.value" ng-disabled={{el.disabled}} ng-focus="inputFocus($event)" autofocus="true" bv-isnum ng-change="formElKeyup(com_pay.$invalid, com_pay.$dirty)" ng-blur="formElKeyup(com_pay.$invalid, com_pay.$dirty)"/>
							<input ng-if="$index == 0 && paySubjectGrp.name != 'cashPay' && paySubjectGrp.name != 'remissionPay'" type="text" class="form-control" name="realPrice" ng-model="el.value" ng-disabled={{el.disabled}} ng-focus="inputFocus($event)" autofocus="true" bv-isnum bv-greaterthan min=0 ng-change="formElKeyup(com_pay.$invalid, com_pay.$dirty)" ng-blur="formElKeyup(com_pay.$invalid, com_pay.$dirty)"/>
							<input ng-if="$index != 0" type="text" class="form-control" name="{{el.name}}" value="{{el.value}}" ng-disabled={{el.disabled}} ng-focus="inputFocus($event)"/>
							<small ng-if="$index == 0" class="help-block" ng-show="com_pay.realPrice.$dirty && com_pay.realPrice.$error.bvIsnum">必须是数字</small>
							<small ng-if="$index == 0" class="help-block" ng-show="com_pay.realPrice.$dirty && com_pay.realPrice.$error.bvGreaterthan">必须大于0</small>
						</div>
					</div>
				</div>
				<div>
					<numkeyboard cur-target="focusInputEl"></numkeyboard>
				</div>
			</div>
			
			<div class="qrcode-box" ng-class="{hidden : !hasQRCode()}" ng-if="paySubjectGrp.name == 'hualalaPay'">
				<h4>{{curQRCodeTitle}}</h4>
				<div id="qrcode" qrcode text="curQRCode" options="curQRCodeOpt"></div>
				<p>{{curQRCodeLabel}}</p>
			</div>
		</form>
	</script> -->
	<!-- 会员卡支付表单部件
	<script type="text/ng-template" id="js/diandan/vippayform.html">
		<form class="row vip-pay" role="form" name="vip_pay" novalidate="novalidate">
			<div class="form-horizontal">
				<div class="form-group">
					<label class="col-xs-3 control-label">卡号</label>
					<div class="col-xs-7">
						<div class="input-group">
							<input type="text" class="form-control" name="card_id" value="" placeholder="卡号/手机号" ng-focus="inputFocus($event)" autofocus="true"/>
							<span class="input-group-btn">
								<button class="btn btn-default" type="button" name="search" data-loading-text="查询中..." autocomplete="off" >查询</button>
							</span>
						</div>
					</div>
					<div class="col-xs-2">
						<span class="label label-success" ng-if="hasVIPInfo() && vipInfo.cardIsCanUsing == 1">
							正常
						</span>
						<span class="label label-danger" ng-if="hasVIPInfo() && vipInfo.cardIsCanUsing != 1">
							{{vipInfo.cardNotCanUsingNotes}}
						</span>
						
					</div>
					<p class="help-block info col-xs-offset-2 col-xs-10" >
						<span class="">姓名:{{vipInfo.userName || '哗啦啦'}}</span>
						<span class="">手机:{{vipInfo.userMobile || '133xxxxxxxx'}}</span>
						<span class="" ng-class="{hidden : vipInfo.customerBirthday.length == 0}">生日:{{vipInfo.customerBirthday || ''}}</span>
						<span class="">{{vipInfo.cardTypeName || 'VIP1'}}</span>
					</p>
				</div>
				
			</div>
			<div class="form-horizontal" >
				<div class="form-group">
					<label class="col-xs-3 control-label">使用积分</label>
					<div class="col-xs-5" ng-class="{'has-success' : vip_pay.point_amount.$dirty && vip_pay.point_amount.$valid, 'has-error' : vip_pay.point_amount.$invalid}">
						<input type="text" class="form-control" name="point_amount" ng-model="payByPoint" ng-focus="inputFocus($event)" bv-isnum ng-change="formElKeyup(vip_pay.$invalid)" ng-blur="formElKeyup(vip_pay.$invalid)"/>
						<small class="help-block" ng-show="vip_pay.point_amount.$dirty && vip_pay.point_amount.$error.bvIsnum">必须是数字</small>
					</div>
					<div class="col-xs-4">
						<p class="help-block info">使用积分:{{vipInfo.cardPointBalance || 0}}</p>
						<p class="help-block info">可抵金额:{{vipInfo.cardPointAsMoney || 0 | mycurrency:"￥"}}</p>
					</div>
				</div>
				<div class="form-group">
					<label class="col-xs-3 control-label">使用卡值</label>
					<div class="col-xs-5" ng-class="{'has-success' : vip_pay.money_amount.$dirty && vip_pay.money_amount.$valid, 'has-error' : vip_pay.money_amount.$invalid}">
						<input type="text" class="form-control" name="money_amount" ng-model="payByCash" ng-focus="inputFocus($event)" bv-isnum ng-change="formElKeyup(vip_pay.$invalid)" ng-blur="formElKeyup(vip_pay.$invalid)"/>
						<small class="help-block" ng-show="vip_pay.money_amount.$dirty && vip_pay.money_amount.$error.bvIsnum">必须是数字</small>
					</div>
					<div class="col-xs-4">
						<p class="help-block info">使用余额:{{sumVIPCardMoneyBalance(vipInfo.cardCashBalance, vipInfo.cardGiveBalance) || 0 | mycurrency:"￥"}}</p>
					</div>
				</div>
			</div>
			<div class="user-voucher">
				<div class="voucher-info">
					<label class="">用券:</label>
					<span>{{curCashVoucherStr}}</span>
				</div>
				<div class="btngrp-box btngrp-2x3 voucher-grp" pager-list="loop" pager-data="{{cashVoucherOpts}}" page-size="5" item-selector=".btn.btn-checkbox" btn-selector=".btn-pager" page-num="0">
					<checkboxgroup group-opts="cashVoucherOpts" checkbox-name="cash_voucher" cur-val="curCashVouchers" class="btn-group" role="group" data-toggle="buttons" on-change="onCashVoucherChange(val, checkboxName, tarScope, curVal)" ></checkboxgroup>
					<div class="col-xs-2 cell-btn btn btn-default btn-pager" pager-direction="+1"><span>翻页</span></div>
				</div>
			</div>
			<div class="form-horizontal">
				<div class="form-group">
					<label class="col-xs-3 control-label">支付确认码</label>
					<div class="col-xs-7">
						<input type="password" class="form-control" name="auth_code" value="{{cardTransPWD}}" ng-focus="inputFocus($event)"/>
					</div>
					
				</div>
			</div>
			<numkeyboard cur-target="focusInputEl"></numkeyboard>

		</form>
	</script> -->
</section>